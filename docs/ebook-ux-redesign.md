# 전자책 UX 개편 제안

## 1. 배경 & 목표
- 현행 전자책 탭은 상태·작업·결과물을 사용자가 직접 탐색해야 하며, 자동 준비/배포 지원이 부족하다.
- 목표: 사용자가 탭을 열자마자 현재 상태, 필요한 조치, 완성/배포까지의 경로를 한 눈에 이해하고, 최소 액션으로 전자책을 완성·공유할 수 있게 한다.

## 2. 핵심 UX 원칙
1. **스마트 오케스트레이션**: 앱이 선행 데이터를 수집/평가하여 “지금 무엇을 하면 되는지”를 자연어로 알려준다.
2. **One-Click Journey**: “전자책 만들기” 버튼 한 번으로 커버/본문/메타데이터/배포 준비까지 자동 진행, 중간 상태는 타임라인으로 표시.
3. **프리뷰 중심**: 완성된 전자책과 커버, SNS 카드 미리보기를 즉시 제공해 사용자가 결과를 확인하고 수정을 유도.
4. **배포까지 이어지는 UX**: 다운로드에서 끝나지 않고 SNS 업로드/콘텐츠 카드 생성까지 하나의 플로우로 묶는다.

## 3. IA & 화면 구조
```
[스마트 상태 헤더]
  - 상태 요약 뱃지 (커버/본문/메타데이터/배포)
  - 자동 체크리스트 & 권장 Action 버튼

[준비 타임라인]
  1. 커버 생성
  2. 본문 빌드
  3. 메타데이터 검토
  4. SNS 카드 생성
  5. 배포 완료

[커버 작업 영역]
  - 현재 커버 세트 요약 (버전, 생성일, Gemini 모델)
  - 앞/뒤/책등 프리뷰 + 개별 다운로드
  - "AI 커버 생성" / "앞면만 재생성" / "전체 재생성" 버튼
  - 커버 생성 로그/에러 표시

[미리보기 영역]
  - 전자책 뷰어 (EPUB/PDF)
  - 커버 캐러셀 (front/back/spine/wrap)
  - SNS 카드/썸네일 프리뷰

[다운로드 & 배포]
  - EPUB/PDF 다운로드
  - SNS별 카드 & 문구
  - 업로드 도우미 (Zip/직접 연동)
```

## 4. 자동화 시나리오
1. **탭 진입 시 데이터 수집**
   - 서버가 `ebooks`, `ebook_cover_sets`, `translation_files`, `document_profiles`, `ebook_metadata`를 병렬 조회.
   - 누락 항목이 있으면 자동 큐잉 (예: 커버 없음 → `coverService.queueCoverRegeneration`).
2. **원클릭 준비**
   - `/api/projects/:id/ebook/build` 신설: 번역 결과 확정 → 커버 확인 → EPUB/PDF 렌더링 → SNS 카드 생성 순으로 워크플로우 실행.
3. **자동 메타 추출**
   - 번역 프로파일 summary에서 한 줄 시놉시스, 저자/역자 소개, 키워드 추출 → 메타데이터 폼에 프리필.
4. **SNS 카드 생성**
   - Gemini/AIImageService로 Instagram/Facebook/YouTube 규격 썸네일 생성.
   - LLM으로 플랫폼별 캡션/해시태그 생성.
5. **배포 지원**
   - SNS API 연동 또는 Zip 패키지(이미지+캡션+영상 스크립트).
   - `ebook_distribution_channels`에 게시 상태 기록 및 UI 갱신.

## 5. API & 백엔드 요구사항
- `GET /api/projects/:id/ebook/overview`: 상태 요약, 체크리스트, 권장 Action, SNS 카드 준비 상태 포함.
- `POST /api/projects/:id/ebook/build`: 빌드 파이프라인 트리거, `jobs` 테이블로 단계별 진행 추적.
- `POST /api/projects/:id/ebook/sns`: SNS 카드 생성 + 문구 반환.
- `GET /api/projects/:id/ebook/assets`: 버전별 EPUB/PDF/SNS 자산 목록 및 다운로드 URL.

## 6. 프런트엔드 UI/UX
- **스마트 헤더 컴포넌트**: 상태 뱃지 + 권장 CTA, 자연어 설명 (e.g., “커버 준비 완료, 메타데이터 중 저자명만 입력하면 바로 배포할 수 있어요”).
- **체크리스트 카드**: 항목별 Progress bar + “자동 처리 중”/“사용자 입력 필요” 상태 표시.
- **타임라인**: 기존 번역 타임라인 패턴을 재사용해 준비 단계를 시각화.
- **커버 작업 영역**: 현재 커버 세트 요약, front/back/spine/wrap 프리뷰, 생성/재생성 버튼, 개별 다운로드.
- **미리보기**: iframe 기반 EPUB 뷰어 + 커버 캐러셀 + SNS 카드 슬라이더.
- **다운로드/배포 영역**: 포맷 선택, 링크 공유, SNS 업로드 버튼.

## 7. 협업 플랜
| 역할 | 주요 작업 |
| --- | --- |
| 아키텍트 | 새 API/워크플로우 설계, 상태 집계 쿼리, SNS 카드 생성 서비스 정의 |
| 백엔드 | 빌드 파이프라인, 커버/본문 큐 통합, SNS 자산 저장/다운로드, Gemini 카드 생성 구현 |
| 프런트엔드 | 스마트 헤더·체크리스트·타임라인·미리보기 UI, 상태 폴링, SNS 카드 프리뷰 |
| 디자이너 | 카드 레이아웃, SNS 템플릿, CTA 가이드라인 |
| PM/콘텐츠 | SNS 정책/사전 문구 정의, 사용자 메시지 톤 정리 |

## 8. 우선순위 로드맵
1. **MVP**: 상태 헤더 + 자동 체크리스트 + 원클릭 빌드 API + 커버/본문 타임라인.
2. **Phase 2**: SNS 카드 생성/미리보기 + Zip 패키지 제공.
3. **Phase 3**: SNS API 연동, 배포 상태 피드백, A/B 테스트.

## 9. 기대 효과
- 사용자는 탭 진입만으로 현황/다음 단계/CTA를 즉시 이해.
- 반복 작업(커버 생성, 메타 입력, SNS 카드 준비)이 자동화되어 클릭 수와 대기 시간이 크게 감소.
- 전자책 완성 → 배포까지 하나의 플로우로 이어져 제품 만족도 상승.
